!function(){"use strict";nv.models.step=function(){function t(t,n,e){return{data:n,index:e,color:d3.select(t).style("fill")}}function n(t,n){var e=t.indexOf(n);return e>=0?t.slice(0,e):[]}function e(g){return m.reset(),g.each(function(m){function g(t){return l(d3.sum(n(m,t),u))}function h(t){return g(t)+l(u(t))/2}function k(t){return c(s(t))+c.rangeBand()/2}function x(t,n){var e=h(t),o=k(t),r=h(n),i=k(n);return[[e,o],[e,i],[r,i]]}var b=d3.select(this);nv.utils.initSVG(b),e.update=function(){b.transition().duration(v).call(e)},e.container=this;var M=nv.utils.availableWidth(r,b,o),y=nv.utils.availableHeight(i,b,o),C=d3.svg.line(),w=b.selectAll("g.nv-wrap.nv-step").data([m]),L=w.enter().append("g").attr("class","nvd3 nv-wrap nv-step").append("g"),A=L.append("g").attr("class","nv-groups").selectAll(".nv-step").data(function(t){return t});l.domain([0,d3.sum(m,u)]).range([0,M]),c.domain(m.map(s)).rangeRoundBands([0,y]),w.attr("transform","translate("+o.left+","+o.top+")"),m.forEach(function(t,n,e){var o=(d(t,n,e)||[]).map(function(e){return{path:x(t,e),transform:function(t){var e="nv-groupLinkTo nv-groupLinkTo-"+n+" nv-groupLink nv-groupLink-"+n;t.attr("class",e)}}}),r=(f(t,n,e)||[]).map(function(e){return{path:x(e,t),transform:function(t){var e="nv-groupLinkFrom nv-groupLinkFrom-"+n+" nv-groupLink nv-groupLink-"+n;t.attr("class",e).attr("stroke-dasharray","5, 10")}}});o.concat(r).forEach(function(e){var o=L.selectAll(".nv-groups").append("path").attr("d",C(e.path)).attr("stroke",function(){return a(t,n)}).attr("stroke-width","2").attr("fill","none");e.transform(o)})}),A.enter().append("g").attr("class",function(t,n){return"nv-group nv-group-"+n}).append("rect").attr("rx",5).attr("ry",5).attr("y",0).attr("transform",function(t){return"translate("+g(t)+","+c(s(t))+")"}).attr("height",function(){return c.rangeBand()}).attr("width",function(t){return Math.max(1,l(u(t)))}).style("fill",a).style("stroke",a).on("click",function(n,e){w.selectAll(".nv-groupLink").classed({selected:!1}),w.selectAll(".nv-groupLink-"+e).classed({selected:!0}),p.elementClick(t(this,n,e))}).on("mouseover",function(n,e){w.selectAll(".nv-groupLink-"+e).classed({preview:!0}),p.elementMouseover(t(this,n,e))}).on("mouseout",function(n,e){w.selectAll(".nv-groupLink-"+e).classed({preview:!1}),p.elementMouseout(t(this,n,e))}).on("mousemove",function(n,e){p.elementMousemove(t(this,n,e))}),A.exit().remove()}),m.renderEnd("step immediate"),e}var o={top:0,right:0,bottom:0,left:0},r=null,i=null,a=nv.utils.defaultColor(),u=function(t){return t.x},s=function(t){return t.y},l=d3.scale.linear(),c=d3.scale.ordinal(),d=function(){},f=function(){},p=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v=250,m=nv.utils.renderWatch(p,v);return e.dispatch=p,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},x:{get:function(){return u},set:function(t){u=t}},y:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return l},set:function(t){l=t}},yScale:{get:function(){return c},set:function(t){c=t}},linksTo:{get:function(){return d},set:function(t){d=t}},linksFrom:{get:function(){return f},set:function(t){f=t}},color:{get:function(){return a},set:function(t){a=nv.utils.getColor(t)}},duration:{get:function(){return v},set:function(t){v=t,m.reset(v)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),nv.utils.initOptions(e),e},nv.models.stepChart=function(){function t(g){return m.reset(),m.models(o),m.models(c),m.models(d),g.each(function(m){var g=d3.select(this);nv.utils.initSVG(g);var h=nv.utils.availableWidth(i,g,r),k=nv.utils.availableHeight(a,g,r),x=g.selectAll("g.nv-wrap.nv-stepChart").data([m]),b=x.enter().append("g").attr("class","nvd3 nv-wrap nv-stepChart").append("g");t.update=function(){g.transition().duration(v).call(t)},t.container=this,n=o.xScale().domain([0,d3.sum(m,s)]).range([0,h]),e=o.yScale().domain(m.map(l)).rangeRoundBands([0,k]),x.attr("transform","translate("+r.left+","+r.top+")"),b.append("g").attr("class","nv-x nv-axis"),b.append("g").attr("class","nv-y nv-axis"),b.append("g").attr("class","nv-stepsWrap"),o.width(h).height(k).color(m.map(function(t,n){return t.color||u(t,n)})),x.select(".nv-stepsWrap").datum(function(t){return t}).transition().call(o),c.scale(n).tickSize(-k,0),x.select(".nv-x.nv-axis").attr("transform","translate(0,"+k+")"),x.select(".nv-x.nv-axis").call(c),d.scale(e).tickSize(-h,0),x.select(".nv-y.nv-axis").call(d),o.dispatch.on("elementClick.stepChart",function(t){p.elementClick(t)}),o.dispatch.on("elementMouseover.stepChart",function(n){n.value=t.y()(n.data),n.series={key:t.y()(n.data),value:t.x()(n.data),color:n.color},f.data(n).hidden(!1),p.elementMouseover(n)}),o.dispatch.on("elementMouseout.stepChart",function(t){f.hidden(!0),p.elementMouseout(t)}),o.dispatch.on("elementMousemove.stepChart",function(t){f(),p.elementMousemove(t)})}),m.renderEnd("step chart immediate"),t}var n,e,o=nv.models.step(),r={top:30,right:20,bottom:50,left:60},i=null,a=null,u=nv.utils.defaultColor(),s=function(t){return t.x},l=function(t){return t.y},c=nv.models.axis(),d=nv.models.axis(),f=nv.models.tooltip(),p=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v=250,m=nv.utils.renderWatch(p,v);return c.orient("bottom").tickFormat(d3.format(",.1f")),d.orient("left").tickPadding(5).showMaxMin(!1),f.duration(0).valueFormatter(function(t,n){return c.tickFormat()(t,n)}).headerFormatter(function(t,n){return d.tickFormat()(t,n)}),t.dispatch=p,t.step=o,t.xAxis=c,t.yAxis=d,t.tooltip=f,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return a},set:function(t){a=t}},color:{get:function(){return u},set:function(t){u=nv.utils.getColor(t)}},duration:{get:function(){return v},set:function(t){v=t,m.reset(v),o.duration(v),c.duration(v),d.duration(v)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),nv.utils.inheritOptions(t,o),nv.utils.initOptions(t),t}}();